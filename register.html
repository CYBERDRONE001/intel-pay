<!-- register.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Register â€“ IntelPay</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white h-screen flex items-center justify-center">
  <form id="registerForm" class="bg-gray-800 p-6 rounded w-full max-w-md space-y-4">
    <h2 class="text-2xl font-bold">Register</h2>
    <input type="text" id="name" placeholder="Full Name" required class="w-full p-2 bg-gray-700 rounded" />
    <input type="email" id="email" placeholder="Email" required class="w-full p-2 bg-gray-700 rounded" />
    <input type="password" id="password" placeholder="Password" required class="w-full p-2 bg-gray-700 rounded" />
    <button type="submit" class="w-full bg-green-600 p-2 rounded">Register</button>
    <p class="text-sm">Already have an account? <a href="login.html" class="text-blue-400">Login</a></p>
  </form>

  <script type="module">
  import { auth, db } from './firebase-config.js';
  import {
    createUserWithEmailAndPassword,
    updateProfile
  } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
  import { doc, setDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

  const form = document.getElementById('registerForm');
  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const name = form.name.value;
    const email = form.email.value;
    const password = form.password.value;

    try {
      const cred = await createUserWithEmailAndPassword(auth, email, password);
      await updateProfile(cred.user, { displayName: name });
      await setDoc(doc(db, "users", cred.user.uid), {
        name, email, activated: false, earnings: 0, admin: false
      });
      alert("Registered successfully!");
      location.href = "plans.html";
    } catch (err) {
      alert("Registration failed: " + err.message);
    }
  });
  </script>
</body>
</html>
<!-- register.html will be replaced with actual implementation -->
